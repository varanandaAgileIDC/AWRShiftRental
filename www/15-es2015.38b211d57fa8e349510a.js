(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{KnCD:function(t,e,i){"use strict";i.r(e),i.d(e,"OtpPageModule",(function(){return O}));var n=i("ofXK"),s=i("3Pt+"),o=i("TEn/"),r=i("tyNb"),c=i("HDdC"),a=i("quSY");class b extends a.a{constructor(t,e){super()}schedule(t,e=0){return this}}class l extends b{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this}requestAsyncId(t,e,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,n=void 0;try{this.work(t)}catch(s){i=!0,n=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,i=e.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let h=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(t,e=0,i){return new this.SchedulerAction(this,t).schedule(i,e)}}return t.now=()=>Date.now(),t})();class u extends h{constructor(t,e=h.now){super(t,()=>u.delegate&&u.delegate!==this?u.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,i){return u.delegate&&u.delegate!==this?u.delegate.schedule(t,e,i):super.schedule(t,e,i)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const d=new u(l);var p=i("DH7j");function g(t=0,e=d){var i;return i=t,(Object(p.a)(i)||!(i-parseFloat(i)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=d),new c.a(i=>(i.add(e.schedule(f,t,{subscriber:i,counter:0,period:t})),i))}function f(t){const{subscriber:e,counter:i,period:n}=t;e.next(i),this.schedule({subscriber:e,counter:i+1,period:n},n)}var M=i("fXoL"),v=i("H+bZ");function L(t,e){1&t&&(M.Mb(0,"p",2),M.jc(1,"Didn't get the OTP? "),M.Mb(2,"u",11),M.jc(3,"Resend"),M.Lb(),M.Lb())}function m(t,e){if(1&t){const t=M.Nb();M.Mb(0,"p",2),M.jc(1,"Didn't get the OTP? "),M.Mb(2,"u",12),M.Ub("click",(function(){return M.fc(t),M.Wb().resendOtp()})),M.jc(3,"Resend"),M.Lb(),M.Lb()}}function w(t,e){if(1&t&&(M.Mb(0,"div",9),M.Mb(1,"p"),M.jc(2,"Resend OTP in "),M.Mb(3,"span",13),M.jc(4),M.Lb(),M.jc(5," seconds"),M.Lb(),M.Lb()),2&t){const t=M.Wb();M.zb(4),M.lc(" ",t.timeLeft," ")}}const y=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.activateRoute=t,this.apiService=e,this.router=i,this.platform=n,this.timeLeft=30,this.otpBtn=!0,this.email=JSON.parse(this.activateRoute.snapshot.params.data)}ngOnInit(){}ionViewDidEnter(){this.apiService.interval=g(1e3).subscribe(t=>{this.timeLeft>0?(this.timeLeft--,this.otpBtn=!0):0==this.timeLeft&&(this.otpBtn=!1,this.apiService.interval.unsubscribe())}),this.platform.backButton.subscribeWithPriority(10,t=>{console.log("Back press handler!"),this.router.navigate(["/register"])})}resendOtp(){this.apiService.postMethod("api/resendotp?",{email:this.email}).then(t=>{console.log(t),"S"==t.status&&this.apiService.nativeToast(t.message),this.otpInterval()},t=>{console.log(t),this.apiService.nativeToast(t.error.message)})}otpInterval(){this.timeLeft=30,this.apiService.interval=g(1e3).subscribe(t=>{this.timeLeft>0?(this.timeLeft--,this.otpBtn=!0):0==this.timeLeft&&(this.otpBtn=!1,this.apiService.interval.unsubscribe())})}otpValidate(){let t=this.one+this.two+this.three+this.four+this.five+this.six;t?this.apiService.postMethod("api/validateotp?",{email:this.email,otp:t}).then(t=>{console.log(t),"S"==t.status?0==t.user.status?(this.apiService.nativeToast(t.message),this.router.navigateByUrl("/login")):(this.apiService.nativeToast(t.message),localStorage.setItem("AWRLogin",JSON.stringify(t.user)),this.router.navigate(["/tabs"])):this.apiService.nativeToast(t.message)},t=>{console.log(t),this.apiService.nativeToast(t.error.message)}):this.apiService.nativeToast("Please enter OTP")}}return t.\u0275fac=function(e){return new(e||t)(M.Jb(r.a),M.Jb(v.a),M.Jb(r.g),M.Jb(o.M))},t.\u0275cmp=M.Db({type:t,selectors:[["app-otp"]],decls:43,vars:9,consts:[["src","../../../assets/login-banner.png",2,"margin-top","-2px"],[2,"font-size","18px","color","black"],[2,"font-size","16px"],[1,"input-group"],[2,"padding","10px"],[1,"input-field"],["type","tel","maxlength","1",3,"ngModel","ngModelChange"],["style","font-size: 16px;",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[2,"text-align","center"],[1,"validateBtn",3,"click"],[2,"color","black"],[2,"color","#1D97DB",3,"click"],[2,"color","#1D97DB"]],template:function(t,e){1&t&&(M.Mb(0,"div"),M.Kb(1,"img",0),M.Lb(),M.Mb(2,"ion-content"),M.Mb(3,"h5"),M.jc(4,"Let's Go Anywhere, Anytime"),M.Lb(),M.Mb(5,"b"),M.Mb(6,"p",1),M.jc(7,"Enter verification code"),M.Lb(),M.Lb(),M.Mb(8,"p",2),M.jc(9,"The OTP has been sent to your registered email address"),M.Lb(),M.Mb(10,"div",3),M.Mb(11,"ion-grid"),M.Mb(12,"ion-row",4),M.Mb(13,"ion-col"),M.Mb(14,"div",5),M.Mb(15,"ion-item"),M.Mb(16,"ion-input",6),M.Ub("ngModelChange",(function(t){return e.one=t})),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Mb(17,"ion-col"),M.Mb(18,"div",5),M.Mb(19,"ion-item"),M.Mb(20,"ion-input",6),M.Ub("ngModelChange",(function(t){return e.two=t})),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Mb(21,"ion-col"),M.Mb(22,"div",5),M.Mb(23,"ion-item"),M.Mb(24,"ion-input",6),M.Ub("ngModelChange",(function(t){return e.three=t})),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Mb(25,"ion-col"),M.Mb(26,"div",5),M.Mb(27,"ion-item"),M.Mb(28,"ion-input",6),M.Ub("ngModelChange",(function(t){return e.four=t})),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Mb(29,"ion-col"),M.Mb(30,"div",5),M.Mb(31,"ion-item"),M.Mb(32,"ion-input",6),M.Ub("ngModelChange",(function(t){return e.five=t})),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Mb(33,"ion-col"),M.Mb(34,"div",5),M.Mb(35,"ion-item"),M.Mb(36,"ion-input",6),M.Ub("ngModelChange",(function(t){return e.six=t})),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.ic(37,L,4,0,"p",7),M.ic(38,m,4,0,"p",7),M.ic(39,w,6,1,"div",8),M.Mb(40,"div",9),M.Mb(41,"ion-button",10),M.Ub("click",(function(){return e.otpValidate()})),M.jc(42,"Continue"),M.Lb(),M.Lb(),M.Lb()),2&t&&(M.zb(16),M.bc("ngModel",e.one),M.zb(4),M.bc("ngModel",e.two),M.zb(4),M.bc("ngModel",e.three),M.zb(4),M.bc("ngModel",e.four),M.zb(4),M.bc("ngModel",e.five),M.zb(4),M.bc("ngModel",e.six),M.zb(1),M.bc("ngIf",e.otpBtn),M.zb(1),M.bc("ngIf",!e.otpBtn),M.zb(1),M.bc("ngIf",e.otpBtn))},directives:[o.j,o.l,o.w,o.i,o.p,o.o,o.O,s.e,s.h,s.k,n.j,o.f],styles:["h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-align:center}h5[_ngcontent-%COMP%]{color:#1d97db;margin-bottom:30px}.input-field[_ngcontent-%COMP%]{background:#eef4fa;border-radius:14px;overflow:hidden;margin-bottom:15px}ion-item[_ngcontent-%COMP%]{--ion-background-color:transparent;--border-color:#000;--color:#484d52}ion-input[_ngcontent-%COMP%]{text-align:center}.validateBtn[_ngcontent-%COMP%]{margin-top:20px;--background:#1d97db;--box-shadow:none;--border-radius:14px;width:80%;height:55px;text-transform:none}"]}),t})()}];let x=(()=>{class t{}return t.\u0275mod=M.Hb({type:t}),t.\u0275inj=M.Gb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(y)],r.i]}),t})(),O=(()=>{class t{}return t.\u0275mod=M.Hb({type:t}),t.\u0275inj=M.Gb({factory:function(e){return new(e||t)},imports:[[n.b,s.d,o.H,x]]}),t})()}}]);