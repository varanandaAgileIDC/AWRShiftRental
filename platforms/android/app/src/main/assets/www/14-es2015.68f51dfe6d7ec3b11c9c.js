(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"H+bZ":function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i("mrSG"),s=i("tk/3"),o=i("HDdC"),r=i("7o/Q");function c(t=-1){return e=>e.lift(new a(t,e))}class a{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new h(t,this.count,this.source))}}class h extends r.a{constructor(t,e,i){super(t),this.count=e,this.source=i}error(t){if(!this.isStopped){const{source:e,count:i}=this;if(0===i)return super.error(t);i>-1&&(this.count=i-1),e.subscribe(this._unsubscribeAndRecycle())}}}var l=i("JIr8"),d=i("fXoL"),u=i("SmVF"),b=i("TEn/");let p=(()=>{class t{constructor(t,e,i){this.http=t,this.toastCtrl=e,this.loadingCtrl=i,this.base_path="http://3.7.140.167:8091/",this.isLoading=!1,this.profileImage="/assets/profile.png",this.addressPopUp="pickUp",this.httpOptions={headers:new s.c({"Content-Type":"application/json"})}}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error(`Backend returned code ${t.status}, body was: `+t.error),new o.a(t=>t.error("Something bad happened; please try again later."))}getRequest(t){return this.http.get(this.base_path+JSON.stringify(t),this.httpOptions).pipe(c(2),Object(l.a)(this.handleError))}postRequest(t,e){return this.http.post(this.base_path+t,e,this.httpOptions).pipe(c(),Object(l.a)(this.handleError))}postMethod(t,e){return new Promise((i,n)=>{this.showLoader(),this.http.post(this.base_path+t,e).subscribe(t=>{this.hideLoader(),i(t)},t=>{this.hideLoader(),n(t)})})}nativeToast(t){this.toastCtrl.show(t,"4000","bottom").subscribe(t=>{console.log(t)})}showLoader(){return Object(n.a)(this,void 0,void 0,(function*(){return this.isLoading=!0,yield this.loadingCtrl.create({message:"Please wait ...",spinner:"circles",cssClass:"loading-class"}).then(t=>{t.present().then(()=>{console.log("loading presented"),this.isLoading||t.dismiss().then(()=>console.log("abort loading"))})})}))}hideLoader(){return Object(n.a)(this,void 0,void 0,(function*(){return this.isLoading=!1,yield this.loadingCtrl.dismiss().then(()=>console.log("loading dismissed"))}))}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(s.a),d.Qb(u.a),d.Qb(b.K))},t.\u0275prov=d.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},KnCD:function(t,e,i){"use strict";i.r(e),i.d(e,"OtpPageModule",(function(){return x}));var n=i("ofXK"),s=i("3Pt+"),o=i("TEn/"),r=i("tyNb"),c=i("HDdC"),a=i("quSY");class h extends a.a{constructor(t,e){super()}schedule(t,e=0){return this}}class l extends h{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this}requestAsyncId(t,e,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,n=void 0;try{this.work(t)}catch(s){i=!0,n=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,i=e.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let d=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(t,e=0,i){return new this.SchedulerAction(this,t).schedule(i,e)}}return t.now=()=>Date.now(),t})();class u extends d{constructor(t,e=d.now){super(t,()=>u.delegate&&u.delegate!==this?u.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,i){return u.delegate&&u.delegate!==this?u.delegate.schedule(t,e,i):super.schedule(t,e,i)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const b=new u(l);var p=i("DH7j");function g(t=0,e=b){var i;return i=t,(Object(p.a)(i)||!(i-parseFloat(i)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=b),new c.a(i=>(i.add(e.schedule(f,t,{subscriber:i,counter:0,period:t})),i))}function f(t){const{subscriber:e,counter:i,period:n}=t;e.next(i),this.schedule({subscriber:e,counter:i+1,period:n},n)}var v=i("fXoL"),M=i("H+bZ");function L(t,e){1&t&&(v.Mb(0,"p",2),v.kc(1,"Didn't get the OTP? "),v.Mb(2,"u",11),v.kc(3,"Resend"),v.Lb(),v.Lb())}function m(t,e){if(1&t){const t=v.Nb();v.Mb(0,"p",2),v.kc(1,"Didn't get the OTP? "),v.Mb(2,"u",12),v.Ub("click",(function(){return v.gc(t),v.Wb().resendOtp()})),v.kc(3,"Resend"),v.Lb(),v.Lb()}}function w(t,e){if(1&t&&(v.Mb(0,"div",9),v.Mb(1,"p"),v.kc(2,"Resend OTP in "),v.Mb(3,"span",13),v.kc(4),v.Lb(),v.kc(5," seconds"),v.Lb(),v.Lb()),2&t){const t=v.Wb();v.zb(4),v.mc(" ",t.timeLeft," ")}}const y=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.activateRoute=t,this.apiService=e,this.router=i,this.platform=n,this.timeLeft=30,this.otpBtn=!0,this.email=JSON.parse(this.activateRoute.snapshot.params.data)}ngOnInit(){}ionViewDidEnter(){this.apiService.interval=g(1e3).subscribe(t=>{this.timeLeft>0?(this.timeLeft--,this.otpBtn=!0):0==this.timeLeft&&(this.otpBtn=!1,this.apiService.interval.unsubscribe())}),this.platform.backButton.subscribeWithPriority(10,t=>{console.log("Back press handler!"),this.router.navigate(["/register"])})}resendOtp(){this.apiService.postMethod("api/resendotp?",{email:this.email}).then(t=>{console.log(t),"S"==t.status&&this.apiService.nativeToast(t.message),this.otpInterval()},t=>{console.log(t),this.apiService.nativeToast(t.error.message)})}otpInterval(){this.timeLeft=30,this.apiService.interval=g(1e3).subscribe(t=>{this.timeLeft>0?(this.timeLeft--,this.otpBtn=!0):0==this.timeLeft&&(this.otpBtn=!1,this.apiService.interval.unsubscribe())})}otpValidate(){let t=this.one+this.two+this.three+this.four+this.five+this.six;t?this.apiService.postMethod("api/validateotp?",{email:this.email,otp:t}).then(t=>{console.log(t),"S"==t.status?0==t.user.status?(this.apiService.nativeToast(t.message),this.router.navigateByUrl("/login")):(this.apiService.nativeToast(t.message),localStorage.setItem("AWRLogin",JSON.stringify(t.user)),this.router.navigate(["/tabs"])):this.apiService.nativeToast(t.message)},t=>{console.log(t),this.apiService.nativeToast(t.error.message)}):this.apiService.nativeToast("Please enter OTP")}}return t.\u0275fac=function(e){return new(e||t)(v.Jb(r.a),v.Jb(M.a),v.Jb(r.g),v.Jb(o.N))},t.\u0275cmp=v.Db({type:t,selectors:[["app-otp"]],decls:43,vars:9,consts:[["src","../../../assets/login-banner.png",2,"margin-top","-2px"],[2,"font-size","18px","color","black"],[2,"font-size","16px"],[1,"input-group"],[2,"padding","10px"],[1,"input-field"],["type","tel","maxlength","1",3,"ngModel","ngModelChange"],["style","font-size: 16px;",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[2,"text-align","center"],[1,"validateBtn",3,"click"],[2,"color","black"],[2,"color","#1D97DB",3,"click"],[2,"color","#1D97DB"]],template:function(t,e){1&t&&(v.Mb(0,"div"),v.Kb(1,"img",0),v.Lb(),v.Mb(2,"ion-content"),v.Mb(3,"h5"),v.kc(4,"Let's Go Anywhere, Anytime"),v.Lb(),v.Mb(5,"b"),v.Mb(6,"p",1),v.kc(7,"Enter verification code"),v.Lb(),v.Lb(),v.Mb(8,"p",2),v.kc(9,"The OTP has been sent to your registered email address"),v.Lb(),v.Mb(10,"div",3),v.Mb(11,"ion-grid"),v.Mb(12,"ion-row",4),v.Mb(13,"ion-col"),v.Mb(14,"div",5),v.Mb(15,"ion-item"),v.Mb(16,"ion-input",6),v.Ub("ngModelChange",(function(t){return e.one=t})),v.Lb(),v.Lb(),v.Lb(),v.Lb(),v.Mb(17,"ion-col"),v.Mb(18,"div",5),v.Mb(19,"ion-item"),v.Mb(20,"ion-input",6),v.Ub("ngModelChange",(function(t){return e.two=t})),v.Lb(),v.Lb(),v.Lb(),v.Lb(),v.Mb(21,"ion-col"),v.Mb(22,"div",5),v.Mb(23,"ion-item"),v.Mb(24,"ion-input",6),v.Ub("ngModelChange",(function(t){return e.three=t})),v.Lb(),v.Lb(),v.Lb(),v.Lb(),v.Mb(25,"ion-col"),v.Mb(26,"div",5),v.Mb(27,"ion-item"),v.Mb(28,"ion-input",6),v.Ub("ngModelChange",(function(t){return e.four=t})),v.Lb(),v.Lb(),v.Lb(),v.Lb(),v.Mb(29,"ion-col"),v.Mb(30,"div",5),v.Mb(31,"ion-item"),v.Mb(32,"ion-input",6),v.Ub("ngModelChange",(function(t){return e.five=t})),v.Lb(),v.Lb(),v.Lb(),v.Lb(),v.Mb(33,"ion-col"),v.Mb(34,"div",5),v.Mb(35,"ion-item"),v.Mb(36,"ion-input",6),v.Ub("ngModelChange",(function(t){return e.six=t})),v.Lb(),v.Lb(),v.Lb(),v.Lb(),v.Lb(),v.Lb(),v.Lb(),v.jc(37,L,4,0,"p",7),v.jc(38,m,4,0,"p",7),v.jc(39,w,6,1,"div",8),v.Mb(40,"div",9),v.Mb(41,"ion-button",10),v.Ub("click",(function(){return e.otpValidate()})),v.kc(42,"Continue"),v.Lb(),v.Lb(),v.Lb()),2&t&&(v.zb(16),v.cc("ngModel",e.one),v.zb(4),v.cc("ngModel",e.two),v.zb(4),v.cc("ngModel",e.three),v.zb(4),v.cc("ngModel",e.four),v.zb(4),v.cc("ngModel",e.five),v.zb(4),v.cc("ngModel",e.six),v.zb(1),v.cc("ngIf",e.otpBtn),v.zb(1),v.cc("ngIf",!e.otpBtn),v.zb(1),v.cc("ngIf",e.otpBtn))},directives:[o.k,o.m,o.x,o.j,o.q,o.p,o.P,s.e,s.h,s.k,n.j,o.g],styles:["h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-align:center}h5[_ngcontent-%COMP%]{color:#1d97db;margin-bottom:30px}.input-field[_ngcontent-%COMP%]{background:#eef4fa;border-radius:14px;overflow:hidden;margin-bottom:15px}ion-item[_ngcontent-%COMP%]{--ion-background-color:transparent;--border-color:#000;--color:#484d52}ion-input[_ngcontent-%COMP%]{text-align:center}.validateBtn[_ngcontent-%COMP%]{margin-top:20px;--background:#1d97db;--box-shadow:none;--border-radius:14px;width:80%;height:55px;text-transform:none}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=v.Hb({type:t}),t.\u0275inj=v.Gb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(y)],r.i]}),t})(),x=(()=>{class t{}return t.\u0275mod=v.Hb({type:t}),t.\u0275inj=v.Gb({factory:function(e){return new(e||t)},imports:[[n.b,s.d,o.I,k]]}),t})()}}]);